!!! 5



//if lt IE 7
  <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en-gb">
//if IE 7
  <html class="no-js lt-ie9 lt-ie8" lang="en-gb">
//if IE 8
  <html class="no-js lt-ie9" lang="en-gb">
//if gt IE 8
  // 
  <html lang="en-gb" class="no-js">

head

  meta(charset='UTF-8')
  //
    |
    | -------------------------------------
    | PopIt
    | -------------------------------------
    | A really easy way to store and share information about politicians or other public figures brought to you by mySociety, a charitable project which builds websites that give people simple, tangible benefits in the civic and community, and teaches through demonstration, how to use the internet most efficiently to improve lives. (http://www.mysociety.org/)
    | --------------------------------- 
  meta(name='creator', content='http://www.mysociety.org/')
  
  //- Stop IE messing up layout with silly buttons on every image 
  meta(http-equiv='imagetoolbar', content='false')
  
  block meta_headers
    //- Blank by default. Make sure the meta desrciption is different on each
    //- page, eg. populate this with the generated summary when viewing people
    //- pages  
  
  title
    block title
      | PopIt 
  
  block css_loading
    link(rel='stylesheet', href='/css/popit.css?v#{config.popit_version}', type='text/css', media='screen, print', charset='utf-8')
    link(rel='stylesheet', href='/css/print.css?v#{config.popit_version}', type='text/css', media='print', charset='utf-8')
  
  //- Mobile viewport optimised: h5bp.com/viewport 
  meta(name='viewport', content='width=device-width,initial-scale=1')
  
  //- Modernizr
  //- In the head to stop conflicts with jQuery 
  //- Full & uncompressed for now until finished then we can do a custom cutdown build with just the bits we need 
  // script(src='/js/libs/modernizr-2.5.3.js', type='text/javascript', charset='utf-8')

  //- Javascript 
  script
    var require = { urlArgs: 'v#{config.popit_version}' };
  script(src='/js/libs/require-1.0.8.js', data-main="/js/main-instance", type='text/javascript', charset='utf-8')

  if locals.user
    script
      require(['/js/main-instance-admin.js']);
    
if locals.user
  - var bodyClasses = ['signed_in']
  
body(id="popit-#{ locals.popit ? popit.instance_name() : 'no-site-found' }", class=bodyClasses)

  //- output any flash messages that we have
  - var flash_info = flash('info')
  if flash_info.length
    div#flash-info
      a.close(href="#") [x]
      ul
        for message in flash_info
          li= message

  if locals.user
    noscript
      #no-js-warning Please <a href="http://www.enable-javascript.com/" target="_blank">enable JavaScript</a> - without it much of the admin on this website will not work.
    
  header#header
    h1.logo
      a(href='/')
        if locals.popit
          span#popit_instance_name #{ popit.pretty_name() }
        else
          | PopIt
            
    #user_menu
      ul

        li
          img#ajax-loader(style="display: none;", src="/img/ajax-loader.gif")

        if locals.user
          li#signed_in
            | Signed in as 
            span.username #{user.email}
                        //- a(href='#user-preferences') View Settings

          li
            a(href='/logout') Sign Out
        else
          li#sign_in
            | already have an account? 
            a(href='/login?redirect_to=#{current_absolute_pathname}') Sign In
            
      ul
        li
          a(href='/') Home
        li
          a(href='/person') People
        li
          a(href='/about') About Us
        li
          form#header_search_form(action="/search", method="get")
            input#header_search_box(type="search", placeholder="search...", name="q")

    div.tagline
      | A public database of people and organisations, hosted on PopIt. 
      br
      | Available for easy browsing and re-use as structured data over a REST API.
  
  #content
    block content
    
  footer#footer
    div
      #sitemap
        ul
          li
            a(href='/about/') About Us
          li
            a(href='/person') People
            | , 
            a(href='/organisation') Organisations
          li
            a(href='#{config.hosting_site_base_url}/info/about') About PopIt
          li
            a(href='/api') API
            |  / 
            a(href='/info/data-import') Data Freedom
          li
            a(href="#{config.hosting_site_base_url}/info/self-hosting") Self Hosting
          li
            a(href='/info/privacy') Terms & Privacy Policy

      #about-mysociety
        
        p
          | This is a database hosted on 
          a(href=config.hosting_site_base_url) PopIt
          |  - a new service from 
          a(href='http://www.mysociety.org', title='mySociety') mySociety 
          | that lowers the barrier to getting started with transparency projects. Development is ongoing and this is 
          a(href="http://en.wikipedia.org/wiki/Software_release_life_cycle#Alpha") Î±
          | lpha code. Please feel free to 
          a(href="#{config.hosting_site_base_url}/instances/new") make your own instance
          | , and join our 
          a(href="https://secure.mysociety.org/admin/lists/mailman/listinfo/components") mailing list
          |  to let us know that you're interested in giving it a go.
        
        p
          | Learn more at 
          a(href='http://www.mysociety.org', title='mySociety') www.mysociety.org

        p
          a(href='http://www.mysociety.org', title='mySociety')
            img.mysociety-logo(src="/img/mysociety-logo.png")


    .copyright
      | &copy; 2012 mySociety.org
      |  - v#{config.popit_version}

      //- This is used to indicate to the test suite that the admin app is loaded.
      br
      span#instance-app-activated.admin-options
        | admin on
      

//- manually close the html tag as we opened it in a funny way using the conditional comments above
</html>