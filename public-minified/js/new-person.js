require(["jquery","backbone-forms","Backbone","underscore"],function(a,b,c,d){a.ajaxSetup({converters:{"text json":function(b){var c=a.parseJSON(b);return c.results||c.result||c}}});var e=c.Model.extend({urlRoot:"/api/v1/person",schema:{name:{dataType:"Text",validators:["required"]},slug:{dataType:"Text"}}}),f=c.View.extend({render:function(){var c=this.form||new b({model:this.model});return this.form=c,c.render(),a(c.el).append('<input type="submit" value="save" />'),this.$el.append(c.el),this},events:{"submit form ":"submitForm"},submitForm:function(b){b.preventDefault();var c=this,e=c.form,f=e.commit();d.isEmpty(f)&&this.model.save({},{success:function(a,b){document.location=b.meta.edit_url},error:function(b,c){var f=a.parseJSON(c.responseText).errors||{};d.each(f,function(a,b){e.fields[b]&&e.fields[b].setError(a)})}})}});a(function(){a("#new-person").click(function(b){b.preventDefault();var c=new e({}),d=new f({model:c});d.render();var g=d.$el;g.hide(),a(this).hide().replaceWith(g),g.slideDown(),d.$(":input:first").focus()})})})